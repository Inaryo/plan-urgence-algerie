{% extends '/pages/home.html.twig' %}
    {% block title %}View Companies{% endblock %}
{% block stylesheets %}
    <link href="{{ asset('nav_bar.css','css') }}" rel="stylesheet"/>
    <link href="{{ asset('show_company.css','css') }}" rel="stylesheet"/>
    <style>
        body {
            background-image: url("{{ asset('show_company.jpg','show_company_images') }}");
            background-size: cover;
        }

    </style>

{% endblock %}

{% block body %}
    <section class="show_company">
        {% block nav %}{{ parent() }}{% endblock %}
        <h1>Companies</h1>
        <div class="line"></div>
        <div class="wrapper">
            <div class="button-div">
                <select name="Filtre">

                    <option value="Wilaya">Wilaya</option>
                    <option value="Name">Name</option>
                    <!-- Ajoutez autant d'option que nÃ©sessaire-->
                </select>
                <button class="filter-button">Category</button>
                <div class="buttons">
                    <button class="filter-button">Filter</button>
                    <button class="add">Add</button>
                </div>

            </div>
            <table>
                <thead>
                <tr>
                    <th>Name</th>
                    <th>Zone</th>
                    <th>Category</th>
                    <th>Email</th>
                    <th>Phone Number</th>
                    <th>Actions</th>
                </tr>
                </thead>

                <tbody>

                {% for company in companies %}
                <tr>
                    <th>{{ company.username }}</th><!--Name value-->
                    <th>{{ company.zone.name }}</th><!--Zone value-->
                    <th>{{ company.category.name }}</th><!--Category value-->
                    <th>{{ company.email }}</th><!--Email value-->
                    <th>0{{ company.mobilephone }}</th><!--Phone number value-->
                    <th>
                        {% if company.activated %}
                            <a href="{{ path('admin.company.edit',{'id': company.id }) }}" >Editer</a>
                        {% else %}
                            <form method="post" action="{{ path('admin.company.activate',{'id': company.id })  }}" onsubmit="return confirm('Are you sure to activate this account ?')">
                                <input type="hidden" name="_method" value="ACTIVATE">
                                <input type="hidden" name="_token" value="{{ csrf_token('activate' ~ company.id) }}">
                                <button type="submit">Activate</button>
                            </form>

                        {% endif %}
                        <form method="post" action="{{ path('admin.company.remove',{id: company.id}) }}" onsubmit="return confirm('Are you sure ?')">
                            <input type="hidden" name="_method" value="DELETE">
                            <input type="hidden" name="_token" value="{{ csrf_token('remove' ~ company.id) }}">
                            <button type="submit">Supprimer</button>
                        </form>
                    </th>
                </tr>
                {% endfor %}



                </tbody>
            </table>
        </div>

    </section>
{% endblock %}